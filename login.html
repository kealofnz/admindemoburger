<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<title>Login - Administración</title>
<style>
/* Tus mismos estilos de antes */
body {
    font-family: Arial, sans-serif;
    background-color: #121212;
    color: #e0e0e0;
    display: flex;
    justify-content: center;
    align-items: center;
    height:100vh;
    margin:0;
}
.login-box {
    background-color: #1f1f1f;
    padding: 2rem;
    border-radius: 8px;
    text-align: center;
    max-width: 300px;
    width:100%;
}
.login-box h2 {
    color: #bb86fc;
}
.login-box input {
    width:100%;
    padding:0.5rem;
    margin:0.5rem 0;
    border-radius:4px;
    border:none;
}
.login-box button {
    background-color: #03dac6;
    color: #121212;
    font-weight: bold;
    padding:0.7rem;
    border-radius:4px;
    cursor:pointer;
    border:none;
}
.login-box button:hover {
    background-color:#01bfa9;
}
.error {
    color:#ff5555;
    margin-top:1rem;
}
</style>
</head>
<body>
    <div class="login-box">
        <h2>Inicio de Sesión</h2>
        <input id="user" placeholder="Usuario" required />
        <input id="pass" placeholder="Contraseña" required type="password" />
        <button id="loginBtn">Entrar</button>
        <div class="error" id="errorMsg"></div>
    </div>
    <script>
        const loginBtn = document.getElementById("loginBtn");
        const errorMsg = document.getElementById("errorMsg");

        loginBtn.addEventListener("click", async () => {
            const user = document.getElementById("user").value.trim();
            const password = document.getElementById("pass").value.trim();

            const response = await fetch("/api/login", {
                method: "POST",
                headers: {"Content-Type": "application/json"},
                body: JSON.stringify({ user, password })
            });
            
            const result = await response.json();

            if (response.ok && result.success) {
                localStorage.setItem("adminLoggedIn", "true");
                window.location.href = "/index.html"; // Redirige al panel
            } else {
                errorMsg.textContent = result.error || "Error desconocido.";
            }
        });
    </script>
</body>
</html>
